<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3迁移文档 | Fanny</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="

Composition API
SFC Composition API Syntax Sugar(``)
Teleport
Fragments
Emits Component Option
createRenderer API 可以用来创建自定义的渲染器（比如你需要创建一个微信小程序的渲染器）
SFC CSS变量
SF ...">
    
    <link rel="preload" href="/FannyBlog/assets/css/0.styles.21529ff0.css" as="style"><link rel="preload" href="/FannyBlog/assets/js/app.a39f2cab.js" as="script"><link rel="preload" href="/FannyBlog/assets/js/12.2adad98b.js" as="script"><link rel="preload" href="/FannyBlog/assets/js/4.afb47655.js" as="script"><link rel="preload" href="/FannyBlog/assets/js/44.c5cca5de.js" as="script"><link rel="prefetch" href="/FannyBlog/assets/js/10.f3addffd.js"><link rel="prefetch" href="/FannyBlog/assets/js/11.af7341fc.js"><link rel="prefetch" href="/FannyBlog/assets/js/13.a1fdcf46.js"><link rel="prefetch" href="/FannyBlog/assets/js/14.52487cd9.js"><link rel="prefetch" href="/FannyBlog/assets/js/15.17bc06b2.js"><link rel="prefetch" href="/FannyBlog/assets/js/16.37a90da4.js"><link rel="prefetch" href="/FannyBlog/assets/js/17.5ee2851b.js"><link rel="prefetch" href="/FannyBlog/assets/js/18.0c1a0a90.js"><link rel="prefetch" href="/FannyBlog/assets/js/19.27b9f03f.js"><link rel="prefetch" href="/FannyBlog/assets/js/20.91354e90.js"><link rel="prefetch" href="/FannyBlog/assets/js/21.45a42a68.js"><link rel="prefetch" href="/FannyBlog/assets/js/22.3c8a244d.js"><link rel="prefetch" href="/FannyBlog/assets/js/23.d6d20a1a.js"><link rel="prefetch" href="/FannyBlog/assets/js/24.26a5e1b3.js"><link rel="prefetch" href="/FannyBlog/assets/js/25.6890fcd1.js"><link rel="prefetch" href="/FannyBlog/assets/js/26.867b77a7.js"><link rel="prefetch" href="/FannyBlog/assets/js/27.118b4733.js"><link rel="prefetch" href="/FannyBlog/assets/js/28.29956b33.js"><link rel="prefetch" href="/FannyBlog/assets/js/29.f19a06a4.js"><link rel="prefetch" href="/FannyBlog/assets/js/3.63c2d876.js"><link rel="prefetch" href="/FannyBlog/assets/js/30.1e146699.js"><link rel="prefetch" href="/FannyBlog/assets/js/31.ee6a8139.js"><link rel="prefetch" href="/FannyBlog/assets/js/32.92896587.js"><link rel="prefetch" href="/FannyBlog/assets/js/33.bb7b024a.js"><link rel="prefetch" href="/FannyBlog/assets/js/34.20a53656.js"><link rel="prefetch" href="/FannyBlog/assets/js/35.d6f64fb4.js"><link rel="prefetch" href="/FannyBlog/assets/js/36.1be04dc2.js"><link rel="prefetch" href="/FannyBlog/assets/js/37.327b8b90.js"><link rel="prefetch" href="/FannyBlog/assets/js/38.05835afc.js"><link rel="prefetch" href="/FannyBlog/assets/js/39.0f694d10.js"><link rel="prefetch" href="/FannyBlog/assets/js/40.48873395.js"><link rel="prefetch" href="/FannyBlog/assets/js/41.2565bae0.js"><link rel="prefetch" href="/FannyBlog/assets/js/42.23a8359e.js"><link rel="prefetch" href="/FannyBlog/assets/js/43.f49b70ef.js"><link rel="prefetch" href="/FannyBlog/assets/js/45.9bd1d62b.js"><link rel="prefetch" href="/FannyBlog/assets/js/46.92661f23.js"><link rel="prefetch" href="/FannyBlog/assets/js/47.8fef021e.js"><link rel="prefetch" href="/FannyBlog/assets/js/48.b674f944.js"><link rel="prefetch" href="/FannyBlog/assets/js/49.7f392eeb.js"><link rel="prefetch" href="/FannyBlog/assets/js/5.01c595b2.js"><link rel="prefetch" href="/FannyBlog/assets/js/50.e6f0a438.js"><link rel="prefetch" href="/FannyBlog/assets/js/51.9f4e10f8.js"><link rel="prefetch" href="/FannyBlog/assets/js/6.7e5fbea0.js"><link rel="prefetch" href="/FannyBlog/assets/js/7.bbd61191.js"><link rel="prefetch" href="/FannyBlog/assets/js/8.f6b71c91.js"><link rel="prefetch" href="/FannyBlog/assets/js/9.08ba69c0.js"><link rel="prefetch" href="/FannyBlog/assets/js/vuejs-paginate.6d4c3ca3.js">
    <link rel="stylesheet" href="/FannyBlog/assets/css/0.styles.21529ff0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/FannyBlog/" class="nav-link home-link">Fanny </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/FannyBlog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/FannyBlog/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="https://github.com/FiggerDancer" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/FannyBlog/" class="nav-link mobile-home-link">Fanny </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/FannyBlog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/FannyBlog/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="https://github.com/FiggerDancer" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Vue3迁移文档
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2022-4-14">
      2022-04-14
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/FannyBlog/tag/Vue" data-v-42ccfcd5><span data-v-42ccfcd5>Vue</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/FannyBlog/tag/学习笔记" data-v-42ccfcd5><span data-v-42ccfcd5>学习笔记</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="新特性"><a href="#新特性" class="header-anchor">#</a> 新特性</h2> <ol><li>Composition API</li> <li>SFC Composition API Syntax Sugar(<code>&lt;script setup&gt;</code>)</li> <li>Teleport</li> <li>Fragments</li> <li>Emits Component Option</li> <li>createRenderer API 可以用来创建自定义的渲染器（比如你需要创建一个微信小程序的渲染器）</li> <li>SFC CSS变量</li> <li>SFC 局部CSS样式，现在可以包含全局规则或者特定插槽的规则</li> <li>Suspense</li></ol> <h2 id="破坏性的改动"><a href="#破坏性的改动" class="header-anchor">#</a> 破坏性的改动</h2> <h3 id="_1-global-api-全局api"><a href="#_1-global-api-全局api" class="header-anchor">#</a> 1. Global API 全局API</h3> <ol><li><p>之前Vue全局方法虽然用起来很方便，但是带来了一系列问题</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>功能</th></tr></thead> <tbody><tr><td>Vue.config</td> <td>app.config</td> <td>配置，想要共享配置，可以提供一个封装好的函数</td></tr> <tr><td>Vue.config.productionTip</td> <td>移除</td> <td>开启生产环境警告提示</td></tr> <tr><td>Vue.config.ignoredElements正则或者元素名称</td> <td>app.config.compilerOptions.isCustomElement函数</td> <td>仅运行时启用：自定义元素</td></tr> <tr><td>Vue.component</td> <td>app.component</td> <td>声明组件(避免污染全局)</td></tr> <tr><td>Vue.directive</td> <td>app.directive</td> <td>指令(避免污染全局)</td></tr> <tr><td>Vue.mixin</td> <td>app.mixin</td> <td>混合器</td></tr> <tr><td>Vue.use</td> <td>app.use</td> <td>安装插件</td></tr> <tr><td>Vue.prototype</td> <td>app.config.globalProperties</td> <td>全局属性（可以考虑使用provide去代替）</td></tr> <tr><td>Vue.extend</td> <td>移除</td> <td>继承Vue构造器。1.在Vue3中新增了defineComponent用于ts类型推断;2.在Vue3中强烈推荐使用组合式API代替继承和混合器;3.你可以使用extends选项代替Vue.extend</td></tr></tbody></table> <ol><li>单元测试变麻烦</li> <li>全局配置使得多个&quot;app&quot;中相同Vue副本很难共用<br>
新：用<code>createApp</code>返回一个app实例<br>
使用下表进行api替换</li></ol></li> <li><p>部分API给摇树带来了困难</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>功能</th></tr></thead> <tbody><tr><td>Vue.nextTick</td> <td>nextTick</td> <td>下一个间隔，相当于微任务或者setTimeout</td></tr> <tr><td>Vue.observable</td> <td>reactive</td> <td>响应式</td></tr> <tr><td>Vue.version</td> <td></td> <td>版本</td></tr> <tr><td>Vue.compile</td> <td>改为仅全量打包有效</td> <td></td></tr> <tr><td>Vue.set</td> <td>set兼容性</td> <td></td></tr> <tr><td>Vue.delete</td> <td>delete兼容性</td> <td></td></tr></tbody></table></li></ol> <h3 id="_2-directive-指令修改"><a href="#_2-directive-指令修改" class="header-anchor">#</a> 2. Directive 指令修改</h3> <ol><li><p>v-model</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>v-model在每个组件上是等效的，传递该组件中value的值和触发组件的input事件</td> <td></td> <td></td></tr> <tr><td>v-bind.sync在每个组件上是等效的，传递的值由用户自己决定的，触发组件的update:props事件</td> <td>使用v-model可以代替，同样使用update:props代替</td> <td></td></tr> <tr><td>支持使用Vue提供的修饰符</td> <td>支持自定义修饰符</td> <td></td></tr></tbody></table></li> <li><p>key</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>v-if/v-else/v-else-if都需要key</td> <td>条件分支不需要key</td> <td></td></tr> <tr><td>v-for的key，不可以放在template上</td> <td>v-for的key可以放在template</td> <td></td></tr></tbody></table></li> <li><p>v-if vs v-for 的优先级</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>v-if优先级低于v-for</td> <td>v-if优先级高于v-for</td> <td>不建议将v-if和v-for放到相同元素上，因为这会导致语义不明确</td></tr></tbody></table></li> <li><p>v-bind合并优先级</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>单独属性一定会覆盖对象</td> <td>后者覆盖前者</td> <td></td></tr></tbody></table></li> <li><p>v-on</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>原生dom使用.native修饰符</td> <td>.native被移除，使用emits选项</td> <td></td></tr> <tr><td></td> <td>Vue现在将所有的事件监听器添加到根元素上，除非子组件设置了inheritAttrs: false</td> <td></td></tr></tbody></table> <p>移除native，确保所有的事件放到emits选项中</p></li></ol> <h3 id="_3-components-组件"><a href="#_3-components-组件" class="header-anchor">#</a> 3. Components 组件</h3> <ol><li><p>Functional Components 函数式组件</p> <table><thead><tr><th>特性</th> <th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>性能</td> <td>性能较有状态组件提升大</td> <td>性能较有状态组件提升微乎其微</td> <td></td></tr> <tr><td>创建</td> <td>在单文件中，template被移除;函数组件创建时需要不再需要添加{functional:true}</td> <td>只接收props,context&lt;{attr,slots,emit}&gt;,render函数变成全局的h函数</td> <td></td></tr> <tr><td>作用</td> <td>1.提升性能;2.多个根节点</td> <td>1.提升性能微乎其微;2.本身有状态组件也可以返回多根节点</td> <td></td></tr></tbody></table> <ol><li><p>具体代码</p> <ol><li><p>code 2.x</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue 2 Functional Component Example</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    functional<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'level'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span> <span class="token punctuation">{</span> props<span class="token punctuation">,</span> data<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">h</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>level<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> children<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Vue 2 Functional Component Example with &lt;template&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">functional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
        <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`h${props.level}`<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attrs<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>listeners<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'level'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>code 3.x</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> <span class="token function-variable function">DynamicHeading</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">h</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>level<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>attrs<span class="token punctuation">,</span> context<span class="token punctuation">.</span>slots<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

DynamicHeading<span class="token punctuation">.</span>props <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'level'</span><span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> DynamicHeading
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
        <span class="token attr-name"><span class="token namespace">v-bind:</span>is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`h${$props.level}`<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'level'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol></li> <li><p>重点</p> <ol><li>函数式组件移除<code>&lt;template&gt;</code></li> <li>监听器现在被移除了，需要放到$attrs中传递</li></ol></li></ol></li> <li><p>Async Components 异步组件（新特性）</p> <ol><li><p><code>defineAsyncComponent</code> 显示定义异步组件</p> <ol><li><p>以前代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">async</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Modal.vue'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> asyncModal <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Modal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    delay<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    timeout<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    error<span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span>
    loading<span class="token operator">:</span> LoadingComponent<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>code 3.x</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> ErrorComponent <span class="token keyword">from</span> <span class="token string">'./components/ErrorComponent.vue'</span>
<span class="token keyword">import</span> LoadingComponent <span class="token keyword">from</span> <span class="token string">'./components/LoadingComponent.vue'</span>

<span class="token keyword">const</span> asyncModal <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Modal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> asyncModalWithOptions <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Modal.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    delay<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    timeout<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    errorComponent<span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span>
    loadingComponent<span class="token operator">:</span> LoadingComponent
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>但路由组件中，不推荐使用上述定义异步组件的方式</p></li></ol></li> <li><p>2.x中的component被替换成loader</p></li> <li><p>Loader函数不接受resolve和reject作为一个参数，且必须返回一个Promise</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 2.x version</span>
    <span class="token keyword">const</span> <span class="token function-variable function">oldAsyncComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3.x version</span>
    <span class="token keyword">const</span> asyncComponent <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">/* ... */</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre></div></li></ol></li> <li><p>emits Option emits选项（新特性）</p> <table><thead><tr><th>2.x</th> <th>3.x</th> <th>备注</th></tr></thead> <tbody><tr><td>event不可被声明</td> <td>event可以在emits中被声明，可以接收一个json对象或者数组</td> <td></td></tr></tbody></table> <p>现在没有native，任何没有被emit声明的事件将被绑定到组件的根组件上</p></li></ol> <h3 id="_4-render-function-渲染函数"><a href="#_4-render-function-渲染函数" class="header-anchor">#</a> 4. Render Function 渲染函数</h3> <ol><li><p>渲染函数 h 变成全局引入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue2</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Vue3</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>节点属性格式变化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue2</span>
<span class="token punctuation">{</span>
    staticClass<span class="token operator">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
    <span class="token keyword">class</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'is-outlined'</span><span class="token operator">:</span> isOutlined
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    staticStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
        color<span class="token operator">:</span> <span class="token string">'#34495E'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    style<span class="token operator">:</span> <span class="token punctuation">{</span>
        backgroundColor<span class="token operator">:</span> buttonColor<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    attrs<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'submit'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    domProps<span class="token operator">:</span> <span class="token punctuation">{</span>
        innerHTML<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    on<span class="token operator">:</span> <span class="token punctuation">{</span>
        click<span class="token operator">:</span> submitForm<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    key<span class="token operator">:</span> <span class="token string">'submit-button'</span>
<span class="token punctuation">}</span>

<span class="token comment">// Vue3</span>
<span class="token punctuation">{</span>
    <span class="token keyword">class</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'button'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token string">'is-outlined'</span><span class="token operator">:</span> isOutlined
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    style<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            color<span class="token operator">:</span> <span class="token string">'#34495E'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            backgroundColor<span class="token operator">:</span> buttonColor
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token string">'submit'</span><span class="token punctuation">,</span>
    innerHTML<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    onClick<span class="token operator">:</span> submitForm<span class="token punctuation">,</span>
    key<span class="token operator">:</span> <span class="token string">'submit-button'</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>注册组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue2.x</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'button-counter'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            count<span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;button @click=&quot;count++&quot;&gt;
            Clicked {{ count }} times.
        &lt;/button&gt;
    </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'button-counter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在3.x，由于VNode是上下文无关的，我们不再使用一个字符串ID来隐式查找已注册的组件，而要借助resolveComponent</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> resolveComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> ButtonCounter <span class="token operator">=</span> <span class="token function">resolveComponent</span><span class="token punctuation">(</span><span class="token string">'button-counter'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>ButtonCounter<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="_5-slots-unification-插槽统一"><a href="#_5-slots-unification-插槽统一" class="header-anchor">#</a> 5. Slots Unification 插槽统一</h3> <ol><li><p>渲染函数定义slot的数据在内容节点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.x</span>
<span class="token comment">// 当使用渲染函数时，用于定义内容节点上的槽数据属性</span>
<span class="token function">h</span><span class="token punctuation">(</span>LayoutComponent<span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> slot<span class="token operator">:</span> <span class="token string">'header'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> slot<span class="token operator">:</span> <span class="token string">'content'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 3.x</span>
<span class="token comment">// 槽被定义为作为对象的当前节点的子节点</span>
<span class="token function">h</span><span class="token punctuation">(</span>LayoutComponent<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">header</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>header<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">content</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>引用作用域插槽</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.x</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$scopedSlots<span class="token punctuation">.</span>header
<span class="token comment">// 3.x</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ol> <h3 id="_6-listeners-被移除"><a href="#_6-listeners-被移除" class="header-anchor">#</a> 6. $listeners 被移除</h3> <p>在3.x中，监听事件被放到了$attrs中，并且增加on的前缀加以区分</p> <h3 id="_7-attrs-包括-class-style"><a href="#_7-attrs-包括-class-style" class="header-anchor">#</a> 7. $attrs 包括 class &amp; style</h3> <p>在3.x中,$attrs现在包括所有传给组件的属性，包括class和style</p> <p>2.x的<code>inheritAttrs: true</code> 被 <code>v-bind=&quot;$attrs&quot;</code> 所代替</p> <h3 id="_8-custom-elements-interop-自定义元素展示"><a href="#_8-custom-elements-interop-自定义元素展示" class="header-anchor">#</a> 8. Custom Elements Interop 自定义元素展示</h3> <ol><li><p>确定标签是否是自定义元素被设置在编译阶段</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.x</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ignoredElements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'plastic-button'</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 3.x</span>
<span class="token comment">// in webpack config</span>
rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">'vue-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
            compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">isCustomElement</span><span class="token operator">:</span> <span class="token parameter">tag</span> <span class="token operator">=&gt;</span> tag <span class="token operator">===</span> <span class="token string">'plastic-button'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token comment">// in js</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>compilerOptions<span class="token punctuation">.</span><span class="token function-variable function">isCustomElement</span> <span class="token operator">=</span> <span class="token parameter">tag</span> <span class="token operator">=&gt;</span> tag <span class="token operator">===</span> <span class="token string">'plastic-button'</span>
</code></pre></div></li> <li><p>is属性仅用于component标签</p> <ol><li>2.x中会变成is所指的组件</li> <li>3.x中会作为属性传递给给组件，只有在component标签上才会生成对应标签；如果要生成vue组件，则需要加上<code>vue:</code>前缀</li></ol></li></ol> <h3 id="_9-keycode-modifiers-键盘keycode修饰符"><a href="#_9-keycode-modifiers-键盘keycode修饰符" class="header-anchor">#</a> 9. KeyCode Modifiers 键盘keyCode修饰符</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 2.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keyup.13</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keyup.enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keyup.f1</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>keyCodes <span class="token operator">=</span> <span class="token punctuation">{</span>
        f1<span class="token operator">:</span> <span class="token number">112</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 3.x --&gt;</span>
<span class="token comment">&lt;!-- 匹配page-down --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keyup.page-down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nextPage<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 匹配q和Q --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keypress.q</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>quit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_10-events-api-事件api"><a href="#_10-events-api-事件api" class="header-anchor">#</a> 10. Events API 事件API</h3> <ol><li><p>去除$on,$off,$once。组件实例不再支持事件触发接口</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.x</span>
<span class="token keyword">const</span> eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

eventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
eventBus<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">)</span>
eventBus<span class="token punctuation">.</span><span class="token function">$once</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
eventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    
<span class="token comment">// 3.x需要自己使用库或封装，但是仍然支持组件实例调用$emit方法    </span>
</code></pre></div></li> <li><p>建议</p> <ol><li>属性和事件对于父子传值应该是第一选择</li> <li>Provide/inject 允许组件和插槽之间的传值，可以用在子孙组件的通讯（层级特别深）</li> <li>也可以使用插槽避免子孙组件传值（层级特别深）</li></ol></li></ol> <h3 id="_11-filters-过滤器"><a href="#_11-filters-过滤器" class="header-anchor">#</a> 11. Filters 过滤器</h3> <ol><li><p>组件内部的<code>filters</code>属性直接移除，可以使用计算属性完美替换</p> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token comment">&lt;!-- 2.x --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ accountBalance | currencyUSD }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        props<span class="token operator">:</span> <span class="token punctuation">{</span>
            accountBalance<span class="token operator">:</span> <span class="token punctuation">{</span>
                type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
                require<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        filters<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">currencyUSD</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 3.x --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ accountInUSD }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        props<span class="token operator">:</span> <span class="token punctuation">{</span>
            accountBalance<span class="token operator">:</span> <span class="token punctuation">{</span>
                type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
                require<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        computed<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function">accountInUSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>accountBalance<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>对于全局性的filters，可以使用 app.config.globalProperties.$filters注册，在组件中使用 <code>$filters.currencyUSD(accountBalance)</code> 代替</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$filters <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">currencyUSD</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{$filters.currencyUSD(accountBalance) }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="_12-inline-template-attribute-内联模板属性"><a href="#_12-inline-template-attribute-内联模板属性" class="header-anchor">#</a> 12. Inline Template Attribute 内联模板属性</h3> <p>3.x已不再支持该特性</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">inline-template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>These are compiled as the component's own template.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Not parent's transclusion content.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol><li><p>过去内联模板主要用于无构建工具，直接在html中写模板的情况</p> <p>大多数情况可以使用 <code>&lt;script&gt;</code> 进行代替</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-comp-template<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> hello <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MyComp <span class="token operator">=</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token string">'#my-comp-template'</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>默认插槽</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 2.x --&gt;</span>
<span class="token comment">&lt;!-- inline-template version --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-comp</span> <span class="token attr-name"><span class="token namespace">inline-template:</span>msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parentMsg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ msg }} {{ childState }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-comp</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- default slot version --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-comp</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ childState }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ parentMsg }} {{ childState }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-comp</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:childState</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>childState<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="_13-children-子节点"><a href="#_13-children-子节点" class="header-anchor">#</a> 13. $children 子节点</h3> <p>移除了 $children 属性，现在只能通过ref从template中获取</p> <h3 id="_14-propsdata-属性-移除"><a href="#_14-propsdata-属性-移除" class="header-anchor">#</a> 14. propsData 属性 移除</h3> <p>在2.x中用来在创建实例时传递属性。3.x中已经移除，如果你需要传递属性，则使用createApp的第二个参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.x</span>
<span class="token keyword">const</span> Comp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue<span class="token punctuation">.</span>extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;{{username}}&lt;/div&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Comp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    propsData<span class="token operator">:</span> <span class="token punctuation">{</span>
        username<span class="token operator">:</span> <span class="token string">'Evan'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 3.x</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
        props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'username'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;{{ username }}&lt;/div&gt;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        username<span class="token operator">:</span> <span class="token string">'Evan'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="_15-attribute-coercion-behavior-属性强制表现-vue内部实现方式修改"><a href="#_15-attribute-coercion-behavior-属性强制表现-vue内部实现方式修改" class="header-anchor">#</a> 15. Attribute Coercion Behavior 属性强制表现（Vue内部实现方式修改）</h3> <ol><li><p>对于一些元素，Vue使用特定的接口属性（比如value对于input等）</p></li> <li><p>对于boolean属性和xlinks，</p> <p>2.x</p> <p>如果是falsy(undefined, null or false)则Vue移除他们</p> <p>3.x</p> <p>移除undefined 和 null，仅支持false</p></li> <li><p>对于枚举属性，</p> <p>2.x</p> <p>Vue强制将他们作为字符串处理，现在对contenteditable进行特殊处理</p> <p>3.x 不处理，视为普通的属性</p></li> <li><p>对于其他属性，我们移除falsy</p> <p>2.x</p> <p>我们移除falsy</p> <p>3.x 如果是false</p> <p>对于非布尔值属性则变成'false'</p></li> <li><p>参考下表</p> <p>2.x</p> <table><thead><tr><th>Binding expression</th> <th>foo normal</th> <th>draggable enumerated</th></tr></thead> <tbody><tr><td>:attr=&quot;null&quot;</td> <td>-</td> <td>draggable=&quot;false&quot;</td></tr> <tr><td>:attr=&quot;undefined&quot;</td> <td>-</td> <td>-</td></tr> <tr><td>:attr=&quot;true&quot;</td> <td>foo=&quot;true&quot;</td> <td>draggable=&quot;true&quot;</td></tr> <tr><td>:attr=&quot;false&quot;</td> <td>-</td> <td>draggable=&quot;false&quot;</td></tr> <tr><td>:attr=&quot;0&quot;</td> <td>foo=&quot;0&quot;</td> <td>draggable=&quot;true&quot;</td></tr> <tr><td>:attr=&quot;&quot;</td> <td>foo=&quot;&quot;</td> <td>draggable=&quot;true&quot;</td></tr> <tr><td>:attr=&quot;foo&quot;</td> <td>foo=&quot;foo&quot;</td> <td>draggable=&quot;true&quot;</td></tr> <tr><td>attr</td> <td>foo=&quot;&quot;</td> <td>draggable=&quot;true&quot;</td></tr></tbody></table> <p>3.x</p> <table><thead><tr><th>Binding expression</th> <th>foo normal</th> <th>draggable enumerated</th></tr></thead> <tbody><tr><td>:attr=&quot;null&quot;</td> <td>-</td> <td>-*</td></tr> <tr><td>:attr=&quot;undefined&quot;</td> <td>-</td> <td>-</td></tr> <tr><td>:attr=&quot;true&quot;</td> <td>foo=&quot;true&quot;</td> <td>draggable=&quot;true&quot;</td></tr> <tr><td>:attr=&quot;false&quot;</td> <td>foo=&quot;false&quot;*</td> <td>draggable=&quot;false&quot;</td></tr> <tr><td>:attr=&quot;0&quot;</td> <td>foo=&quot;0&quot;</td> <td>draggable=&quot;0&quot;*</td></tr> <tr><td>attr=&quot;&quot;</td> <td>foo=&quot;&quot;</td> <td>draggable=&quot;&quot;*</td></tr> <tr><td>attr=&quot;foo&quot;</td> <td>foo=&quot;foo&quot;</td> <td>draggable=&quot;foo&quot;*</td></tr> <tr><td>attr</td> <td>foo=&quot;&quot;</td> <td>draggable=&quot;&quot;*</td></tr></tbody></table> <table><thead><tr><th>Attribute</th> <th>v-bind value 2.x</th> <th>v-bind value 3.x</th> <th>HTML output</th></tr></thead> <tbody><tr><td>2.x “Enumerated attrs”<br>i.e. contenteditable, draggable and spellcheck.</td> <td>undefined</td> <td>undefined, null</td> <td>removed</td></tr> <tr><td>2.x “Enumerated attrs”<br>i.e. contenteditable, draggable and spellcheck.</td> <td>true, 'true', '', 1, 'foo'</td> <td>true, 'true'</td> <td>&quot;true&quot;</td></tr> <tr><td>2.x “Enumerated attrs”<br>i.e. contenteditable, draggable and spellcheck.</td> <td>null, false, 'false'</td> <td>false, 'false'</td> <td>&quot;false&quot;</td></tr> <tr><td>Other non-boolean attrs<br>eg. aria-checked, tabindex, alt, etc.</td> <td>undefined, null, false</td> <td>undefined, null</td> <td>removed</td></tr> <tr><td>Other non-boolean attrs<br>eg. aria-checked, tabindex, alt, etc.</td> <td>'false'</td> <td>false, 'false'</td> <td>&quot;false&quot;</td></tr></tbody></table></li></ol> <h3 id="_16-custom-directives-自定义指令"><a href="#_16-custom-directives-自定义指令" class="header-anchor">#</a> 16. Custom Directives 自定义指令</h3> <table><thead><tr><th></th> <th>2.x</th> <th>3.x</th> <th>说明</th></tr></thead> <tbody><tr><td></td> <td>-</td> <td>created</td> <td>新增：元素属性和事件监听被添加后触发</td></tr> <tr><td></td> <td>bind</td> <td>beforeMount</td> <td>仅调用一次，指定被绑定到元素上时触发</td></tr> <tr><td></td> <td>inserted</td> <td>mounted</td> <td>当元素插入到父级元素中时触发</td></tr> <tr><td></td> <td>-</td> <td>beforeUpdate</td> <td>新增：当元素更新前触发</td></tr> <tr><td></td> <td>update</td> <td>-</td> <td>废弃：当元素更新但子元素还没有被更新时触发</td></tr> <tr><td></td> <td>componentUpdated</td> <td>updated</td> <td>当元素及其子元素更新完成时</td></tr> <tr><td></td> <td>-</td> <td>beforeUnmount</td> <td>新增：当元素被解绑前触发</td></tr> <tr><td></td> <td>unbind</td> <td>unmounted</td> <td>仅调用一次，解绑时触发</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.x 获取实例需要从vnode中取</span>
<span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> vm <span class="token operator">=</span> vnode<span class="token punctuation">.</span>context
<span class="token punctuation">}</span>
<span class="token comment">// 3.x 获取实例需要从binding中取</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> vm <span class="token operator">=</span> binding<span class="token punctuation">.</span>instance
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_17-data-option-数据选项"><a href="#_17-data-option-数据选项" class="header-anchor">#</a> 17. Data Option 数据选项</h3> <table><thead><tr><th></th> <th>2.x</th> <th>3.x</th></tr></thead> <tbody><tr><td>声明</td> <td>允许使用pain object或者function</td> <td>仅支持function</td></tr> <tr><td>混合器合并</td> <td>深合并</td> <td>浅合并</td></tr></tbody></table> <h3 id="_18-mount-api-changes-挂载api修改"><a href="#_18-mount-api-changes-挂载api修改" class="header-anchor">#</a> 18. Mount API changes 挂载api修改</h3> <table><thead><tr><th></th> <th>2.x</th> <th>3.x</th></tr></thead> <tbody><tr><td></td> <td>将指定的元素替换成vue生成的元素</td> <td>将vue生成的元素作为子元素挂载到指定元素中</td></tr></tbody></table> <h3 id="_19-props-default-function-this-access-属性的默认函数中获取this"><a href="#_19-props-default-function-this-access-属性的默认函数中获取this" class="header-anchor">#</a> 19. Props Default Function this Access 属性的默认函数中获取this</h3> <table><thead><tr><th></th> <th>2.x</th> <th>3.x</th></tr></thead> <tbody><tr><td></td> <td>可以获取this</td> <td>1.不能获取this；<br>2.原始的props会作为属性默认函数的参数传递进来；<br>3.inject的函数可以在默认值函数内部使用</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 3.x 可以采取这种方法代替this</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
        theme<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token keyword">default</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'theme'</span><span class="token punctuation">,</span> <span class="token string">'default-theme'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_20-transition-class-change-动画的类名修改"><a href="#_20-transition-class-change-动画的类名修改" class="header-anchor">#</a> 20. Transition Class Change 动画的类名修改</h3> <table><thead><tr><th></th> <th>2.x</th> <th>3.x</th> <th>说明</th></tr></thead> <tbody><tr><td></td> <td>v-enter</td> <td>v-enter-from</td> <td>改变</td></tr> <tr><td></td> <td>v-enter-active</td> <td>v-enter-active</td> <td></td></tr> <tr><td></td> <td>v-enter-to</td> <td>v-enter-to</td> <td></td></tr> <tr><td></td> <td>v-leave</td> <td>v-leave-from</td> <td>改变</td></tr> <tr><td></td> <td>v-leave-active</td> <td>v-leave-active</td> <td></td></tr> <tr><td></td> <td>v-leave-to</td> <td>v-leave-to</td> <td></td></tr></tbody></table> <h3 id="_21-transition-as-root-transition作为根节点"><a href="#_21-transition-as-root-transition作为根节点" class="header-anchor">#</a> 21. Transition as Root transition作为根节点</h3> <p>当组件从外部切换时，使用<code>&lt;transition&gt;</code>作为组件的根将不再触发转换。</p> <p>2.x</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 2.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 2.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modal</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showModal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modal</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.x 中可以使用在组件内部进行控制的方法完成上述功能</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'show'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modal</span> <span class="token attr-name">:show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showModal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modal</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_22-transition-group-root-element-transition-group作为一个根节点"><a href="#_22-transition-group-root-element-transition-group作为一个根节点" class="header-anchor">#</a> 22. Transition Group Root Element transition-group作为一个根节点</h3> <p>2.x必须要有一个根元素</p> <p>3.x不需要有一个根元素</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 2.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ul<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ item }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 3.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>span<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>    
</code></pre></div><h3 id="_23-vnode-lifecycle-events-节点生命周期事件"><a href="#_23-vnode-lifecycle-events-节点生命周期事件" class="header-anchor">#</a> 23. VNode lifecycle events 节点生命周期事件</h3> <table><thead><tr><th>2.x</th> <th>3.x</th></tr></thead> <tbody><tr><td>在2.x中，生命周期的监听需要hook前缀，且只对组件有效</td> <td>在3.x中，生命周期的监听需要vue前缀，且对组件和html元素都有效</td></tr></tbody></table> <h3 id="_24-watch-on-arrays-监听数组"><a href="#_24-watch-on-arrays-监听数组" class="header-anchor">#</a> 24. Watch on Arrays 监听数组</h3> <table><thead><tr><th>2.x</th> <th>3.x</th></tr></thead> <tbody><tr><td>数组改变或被替换时触发，</td> <td>当观察一个数组时，回调只会在数组被替换时触发。如果需要在数组改变时触发，则必须指定deep选项。</td></tr></tbody></table> <h2 id="新框架的建议"><a href="#新框架的建议" class="header-anchor">#</a> 新框架的建议</h2> <h3 id="_1-build-toolchain-构建工具链"><a href="#_1-build-toolchain-构建工具链" class="header-anchor">#</a> 1. Build Toolchain 构建工具链</h3> <p>使用vite作为构建工具链</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> init vue@3
</code></pre></div><h3 id="_2-vue-router-vue路由"><a href="#_2-vue-router-vue路由" class="header-anchor">#</a> 2. Vue Router Vue路由</h3> <p>有大量破坏性的改动</p> <h3 id="_3-state-management-状态管理"><a href="#_3-state-management-状态管理" class="header-anchor">#</a> 3. State Management 状态管理</h3> <p>Pinia 也就是 Vuex 5</p> <p>Vuex 4也已经支持Vue3的使用，api完全相同，唯一需要修改的就是插件的安装</p> <h3 id="_4-ide-support-编辑器支持"><a href="#_4-ide-support-编辑器支持" class="header-anchor">#</a> 4. IDE Support 编辑器支持</h3> <p>启用 Volar 插件， 禁用 Vetur 插件</p> <h3 id="_5-devtools-extension-开发工具扩展"><a href="#_5-devtools-extension-开发工具扩展" class="header-anchor">#</a> 5. Devtools Extension 开发工具扩展</h3> <p>已经完全支持 Vue2 和 Vue3</p> <h3 id="_6-typescript-support-ts支持"><a href="#_6-typescript-support-ts支持" class="header-anchor">#</a> 6. TypeScript Support ts支持</h3> <p>vue-tsc</p> <h3 id="_7-static-site-generator-静态站点生成"><a href="#_7-static-site-generator-静态站点生成" class="header-anchor">#</a> 7. Static Site Generator 静态站点生成</h3> <p>VitePress 代替 VuePress</p> <h3 id="_8-jsx"><a href="#_8-jsx" class="header-anchor">#</a> 8. JSX</h3> <p>@vue/babel-plugin-jsx 新插件</p> <h2 id="迁移构建"><a href="#迁移构建" class="header-anchor">#</a> 迁移构建</h2> <p>@vue/compat 一个Vue2迁移到Vue3的兼容库，可以兼容大部分Vue2的api</p> <h3 id="已知的局限性"><a href="#已知的局限性" class="header-anchor">#</a> 已知的局限性</h3> <ol><li>使用vnode私有属性的，像是ElementUI，需要等待他们的Vue3兼容版</li> <li>不支持IE11</li> <li>服务器渲染，不再提供一个包渲染器，并且建议使用vite搭配SSR。如果正在使用Nuxt需要等待Nuxt3</li></ol> <h3 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h3> <ol><li><p>loader</p> <p>webpack:  vue-loader: ^16.0.0
vue-cli:  使用vue upgrade指令更新@vue/cli-service到最新
vite+vite-plugin-vue2</p></li> <li><p>package.json</p> <div class="language-diff extra-class"><pre class="language-diff"><code>&quot;dependencies&quot;: {
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  &quot;vue&quot;: &quot;^2.6.12&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &quot;vue&quot;: &quot;^3.1.0&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">  &quot;@vue/compat&quot;: &quot;^3.1.0&quot;
</span></span>...
},
&quot;devDependencies&quot;: {
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  &quot;vue-template-compiler&quot;: &quot;^2.6.12&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &quot;@vue/compiler-sfc&quot;: &quot;^3.1.0&quot;
</span></span>}
</code></pre></div></li> <li><p>在构建工具中启用兼容模式</p> <ol><li><p>vue-cli</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span>alias<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">,</span> <span class="token string">'@vue/compat'</span><span class="token punctuation">)</span>
        config<span class="token punctuation">.</span>module
            <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'vue-loader'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token operator">...</span>options<span class="token punctuation">,</span>
                    compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                        compatConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token constant">MODE</span><span class="token operator">:</span> <span class="token number">2</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Plain webpack</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
        alias<span class="token operator">:</span> <span class="token punctuation">{</span>
            vue<span class="token operator">:</span> <span class="token string">'@vue/compat'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                loader<span class="token operator">:</span> <span class="token string">'vue-loader'</span><span class="token punctuation">,</span>
                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                    compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                        compatConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
                            <span class="token constant">MODE</span><span class="token operator">:</span> <span class="token number">2</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Vite</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
        alias<span class="token operator">:</span> <span class="token punctuation">{</span>
            vue<span class="token operator">:</span> <span class="token string">'@vue/compat'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token operator">:</span> <span class="token punctuation">{</span>
                compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
                    compatConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token constant">MODE</span><span class="token operator">:</span> <span class="token number">2</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></li> <li><p>如果正在使用ts，则你需要写一个单独的*.d.ts文件 （如果纯使用Vue3不需要兼容则不需要）</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'vue'</span> <span class="token punctuation">{</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CompatVue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-dom'</span>
<span class="token keyword">const</span> Vue<span class="token operator">:</span> CompatVue
<span class="token keyword">export</span> <span class="token keyword">default</span> Vue
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'@vue/runtime-dom'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> configureCompat <span class="token punctuation">}</span> <span class="token operator">=</span> Vue
<span class="token keyword">export</span> <span class="token punctuation">{</span> configureCompat <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>你的程序可能存在一些编译时的错误和警告。修复这些问题，如果依然有警告，你可以把编译器设置为Vue3模式</p></li> <li><p>修复运行时警告错误</p> <ol><li>您可以在浏览器控制台中筛选特定的警告。使用过滤器并专注于一次修复一个项目是一个好主意。您也可以使用像-GLOBAL_MOUNT这样的否定过滤器。</li> <li>你可以使用兼容性配置禁止特定的弃用</li> <li>一些警告可能是由你使用的依赖(例如vue-router)引起的。您可以从警告的组件跟踪或堆栈跟踪(单击时展开)中检查这一点。首先关注于修复源自您自己的源代码的警告。</li> <li>如果你正在使用vue-router，注意<code>&lt;transition&gt;</code>和<code>&lt;keep-alive&gt;</code>将不能与<code>&lt;router-view&gt;</code>一起工作，直到你升级到vue-router v4。</li></ol></li> <li><p>更新<code>&lt;transition&gt;</code>类名</p></li> <li><p>更新app入口的全局挂载api</p></li> <li><p>更新vuex到v4版本</p></li> <li><p>更新vue-router到v5版本。升级后，要使用<code>&lt;transition&gt;</code>和<code>&lt;keep-alive&gt;</code>和<code>&lt;router-view&gt;</code>，需要使用新的基于作用域槽的语法。</p></li> <li><p>通过配置删除部分警告</p></li> <li><p>修复所有警告后，可以删除迁移构建并正确切换到Vue 3。注意，如果您仍然有依赖于Vue 2行为的依赖项，则可能无法这样做。</p></li></ol> <h3 id="兼容配置"><a href="#兼容配置" class="header-anchor">#</a> 兼容配置</h3> <ol><li><p>Global Config 全局配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> configureCompat <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token function">configureCompat</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">FEATURE_ID_A</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token constant">FEATURE_ID_B</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>Per-Component Config 配置单个组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    compatConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token constant">MODE</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token constant">FEATURE_ID_A</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Compiler-specific Config 在构建中配置</p> <p>通过compilerOptions进行配置</p></li></ol> <h2 id="兼容表"><a href="#兼容表" class="header-anchor">#</a> 兼容表</h2> <ul><li>✔ 完全兼容</li> <li>◐ 部分兼容但会警告</li> <li>⨂ 不兼容（仅警告）</li> <li>⭘ 仅兼容 (无警告)</li></ul> <h3 id="不稳定的"><a href="#不稳定的" class="header-anchor">#</a> 不稳定的</h3> <table><thead><tr><th>ID</th> <th>兼容程度</th> <th>详情描述</th></tr></thead> <tbody><tr><td>GLOBAL_MOUNT_CONTAINER</td> <td>⨂</td> <td>将应用挂载到指定元素上</td></tr> <tr><td>CONFIG_DEVTOOLS</td> <td>⨂</td> <td>生产环境开发工具间现在是一个构建时的标志</td></tr> <tr><td>COMPILER_V_IF_V_FOR_PRECEDENCE</td> <td>⨂</td> <td>当在同一个元素上使用V-if和v-for时，其优先级已经改变</td></tr> <tr><td>COMPILER_V_IF_SAME_KEY</td> <td>⨂</td> <td>V-if分支不能再拥有相同的键</td></tr> <tr><td>COMPILER_V_FOR_TEMPLATE_KEY_PLACEMENT</td> <td>⨂</td> <td><code>&lt;template v-for&gt;</code>键现在应该放在<code>&lt;template&gt;</code>上</td></tr> <tr><td>COMPILER_SFC_FUNCTIONAL</td> <td>⨂</td> <td>在sfc中不再支持<code>&lt;template functional&gt;</code></td></tr></tbody></table> <h3 id="部分兼容"><a href="#部分兼容" class="header-anchor">#</a> 部分兼容</h3> <table><thead><tr><th>ID</th> <th>兼容程度</th> <th>详情描述</th></tr></thead> <tbody><tr><td>CONFIG_IGNORED_ELEMENTS</td> <td>◐</td> <td>配置。ignoredElements现在是config.compilerOptions.isCustomElement(仅在浏览器编译器构建中)。如果使用构建设置，则isCustomElement必须通过构建配置传递。</td></tr> <tr><td>COMPILER_INLINE_TEMPLATE</td> <td>◐</td> <td>内联模板已移除(仅在浏览器编译器构建中支持compat)</td></tr> <tr><td>PROPS_DEFAULT_THIS</td> <td>◐</td> <td>Props默认工厂不再有访问权限(在compat模式下，这不是一个真实的实例-它只暴露Props， $选项和注入)</td></tr> <tr><td>INSTANCE_DESTROY</td> <td>◐</td> <td>$destroy实例方法被删除(在compat模式下，仅支持根实例)</td></tr> <tr><td>GLOBAL_PRIVATE_UTIL</td> <td>◐</td> <td>Vue.util是私有的，不再可用</td></tr> <tr><td>CONFIG_PRODUCTION_TIP</td> <td>◐</td> <td>config.productionTip不再必要</td></tr> <tr><td>CONFIG_SILENT</td> <td>◐</td> <td>config.silent移除</td></tr></tbody></table> <h3 id="兼容无警告"><a href="#兼容无警告" class="header-anchor">#</a> 兼容无警告</h3> <table><thead><tr><th>ID</th> <th>兼容程度</th> <th>详情描述</th></tr></thead> <tbody><tr><td>TRANSITION_CLASSES</td> <td>⭘</td> <td>类名修改</td></tr></tbody></table> <h3 id="稳定兼容"><a href="#稳定兼容" class="header-anchor">#</a> 稳定兼容</h3> <table><thead><tr><th>ID</th> <th>兼容程度</th> <th>详情描述</th></tr></thead> <tbody><tr><td>GLOBAL_MOUNT</td> <td>✔</td> <td>new Vue() -&gt; createApp</td></tr> <tr><td>GLOBAL_EXTEND</td> <td>✔</td> <td>Vue.extend 移除 (使用 defineComponent 或者 extends option)</td></tr> <tr><td>GLOBAL_PROTOTYPE</td> <td>✔</td> <td>Vue.prototype -&gt; app.config.globalProperties</td></tr> <tr><td>GLOBAL_SET</td> <td>✔</td> <td>Vue.set 移除 (不再需要)</td></tr> <tr><td>GLOBAL_DELETE</td> <td>✔</td> <td>Vue.delete 移除 (不再需要)</td></tr> <tr><td>GLOBAL_OBSERVABLE</td> <td>✔</td> <td>Vue.observable 移除 (使用 reactive)</td></tr> <tr><td>CONFIG_KEY_CODES</td> <td>✔</td> <td>config.keyCodes 自动义键盘code码 移除</td></tr> <tr><td>CONFIG_WHITESPACE</td> <td>✔</td> <td>In Vue 3 whitespace defaults to &quot;condense&quot; 在Vue3中空格默认被压缩</td></tr> <tr><td>INSTANCE_SET</td> <td>✔</td> <td>vm.$set 移除 (不再需要)</td></tr> <tr><td>INSTANCE_DELETE</td> <td>✔</td> <td>vm.$delete 移除 (不再需要)</td></tr> <tr><td>INSTANCE_EVENT_EMITTER</td> <td>✔</td> <td>vm.$on, vm.$off, vm.$once 移除</td></tr> <tr><td>INSTANCE_EVENT_HOOKS</td> <td>✔</td> <td>实例不再触发:hook钩子</td></tr> <tr><td>INSTANCE_CHILDREN</td> <td>✔</td> <td>vm.$children 移除</td></tr> <tr><td>INSTANCE_LISTENERS</td> <td>✔</td> <td>vm.$listeners 移除</td></tr> <tr><td>INSTANCE_SCOPED_SLOTS</td> <td>✔</td> <td>vm.$scopedSlots 移除; vm.$slots 现在暴露方法</td></tr> <tr><td>INSTANCE_ATTRS_CLASS_STYLE</td> <td>✔</td> <td>$attrs 现在包含类和样式</td></tr> <tr><td>OPTIONS_DATA_FN</td> <td>✔</td> <td>data 必须是function</td></tr> <tr><td>OPTIONS_DATA_MERGE</td> <td>✔</td> <td>data 来自mixins或者extends都是浅合并</td></tr> <tr><td>OPTIONS_BEFORE_DESTROY</td> <td>✔</td> <td>beforeDestroy -&gt; beforeUnmount</td></tr> <tr><td>OPTIONS_DESTROYED</td> <td>✔</td> <td>destroyed -&gt; unmounted</td></tr> <tr><td>WATCH_ARRAY</td> <td>✔</td> <td>监听数组元素必须要深度监听才能在修改数组元素时触发数组元素的监听回调</td></tr> <tr><td>V_ON_KEYCODE_MODIFIER</td> <td>✔</td> <td>v-on 不再支持键盘code码的修饰符</td></tr> <tr><td>CUSTOM_DIR</td> <td>✔</td> <td>自定义指令钩子名称修改</td></tr> <tr><td>ATTR_FALSE_VALUE</td> <td>✔</td> <td>如果绑定值为布尔值false，则不再删除属性</td></tr> <tr><td>ATTR_ENUMERATED_COERCION</td> <td>✔</td> <td>不再是特殊情况枚举属性</td></tr> <tr><td>TRANSITION_GROUP_ROOT</td> <td>✔</td> <td><code>&lt;transition-group&gt;</code> 不再默认呈现根元素</td></tr> <tr><td>COMPONENT_ASYNC</td> <td>✔</td> <td>Async组件API改变(现在需要defineAsyncComponent)</td></tr> <tr><td>COMPONENT_FUNCTIONAL</td> <td>✔</td> <td>功能组件API改变(现在必须是普通函数)</td></tr> <tr><td>COMPONENT_V_MODEL</td> <td>✔</td> <td>组件 v-model 修改了</td></tr> <tr><td>RENDER_FUNCTION</td> <td>✔</td> <td>渲染函数 API 修改了</td></tr> <tr><td>FILTERS</td> <td>✔</td> <td>Filters 移除 (此选项只影响运行时filter api)</td></tr> <tr><td>COMPILER_IS_ON_ELEMENT</td> <td>✔</td> <td>仅对 <code>&lt;component&gt;</code> 有效</td></tr> <tr><td>COMPILER_V_BIND_SYNC</td> <td>✔</td> <td>v-bind.sync 被 携带参数的v-model 代替</td></tr> <tr><td>COMPILER_V_BIND_PROP</td> <td>✔</td> <td>v-bind.prop 修饰符移除</td></tr> <tr><td>COMPILER_V_BIND_OBJECT_ORDER</td> <td>✔</td> <td>v-bind=&quot;object&quot; 的对象合并现在是顺序敏感的</td></tr> <tr><td>COMPILER_V_ON_NATIVE</td> <td>✔</td> <td>v-on.native 修饰符移除</td></tr> <tr><td>COMPILER_V_FOR_REF</td> <td>✔</td> <td>ref in v-for (编译时支持)</td></tr> <tr><td>COMPILER_NATIVE_TEMPLATE</td> <td>✔</td> <td><code>&lt;template&gt;</code> 没有特殊指令，现在呈现为原生元素</td></tr> <tr><td>COMPILER_FILTERS</td> <td>✔</td> <td>filters (编译时支持)</td></tr></tbody></table> <p><a href="https://v3-migration.vuejs.org/migration-build.html#compiler-specific-config" target="_blank" rel="noopener noreferrer">兼容表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#新特性" title="新特性">新特性</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#破坏性的改动" title="破坏性的改动">破坏性的改动</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1-global-api-全局api" title="1. Global API 全局API">1. Global API 全局API</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-directive-指令修改" title="2. Directive 指令修改">2. Directive 指令修改</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3-components-组件" title="3. Components 组件">3. Components 组件</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_4-render-function-渲染函数" title="4. Render Function 渲染函数">4. Render Function 渲染函数</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_5-slots-unification-插槽统一" title="5. Slots Unification 插槽统一">5. Slots Unification 插槽统一</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-listeners-被移除" title="6. $listeners 被移除">6. $listeners 被移除</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-attrs-包括-class-style" title="7. $attrs 包括 class &amp; style">7. $attrs 包括 class &amp; style</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-custom-elements-interop-自定义元素展示" title="8. Custom Elements Interop 自定义元素展示">8. Custom Elements Interop 自定义元素展示</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_9-keycode-modifiers-键盘keycode修饰符" title="9. KeyCode Modifiers 键盘keyCode修饰符">9. KeyCode Modifiers 键盘keyCode修饰符</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_10-events-api-事件api" title="10. Events API 事件API">10. Events API 事件API</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_11-filters-过滤器" title="11. Filters 过滤器">11. Filters 过滤器</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_12-inline-template-attribute-内联模板属性" title="12. Inline Template Attribute 内联模板属性">12. Inline Template Attribute 内联模板属性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_13-children-子节点" title="13. $children 子节点">13. $children 子节点</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_14-propsdata-属性-移除" title="14. propsData 属性 移除">14. propsData 属性 移除</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_15-attribute-coercion-behavior-属性强制表现-vue内部实现方式修改" title="15. Attribute Coercion Behavior 属性强制表现（Vue内部实现方式修改）">15. Attribute Coercion Behavior 属性强制表现（Vue内部实现方式修改）</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_16-custom-directives-自定义指令" title="16. Custom Directives 自定义指令">16. Custom Directives 自定义指令</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_17-data-option-数据选项" title="17. Data Option 数据选项">17. Data Option 数据选项</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_18-mount-api-changes-挂载api修改" title="18. Mount API changes 挂载api修改">18. Mount API changes 挂载api修改</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_19-props-default-function-this-access-属性的默认函数中获取this" title="19. Props Default Function this Access 属性的默认函数中获取this">19. Props Default Function this Access 属性的默认函数中获取this</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_20-transition-class-change-动画的类名修改" title="20. Transition Class Change 动画的类名修改">20. Transition Class Change 动画的类名修改</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_21-transition-as-root-transition作为根节点" title="21. Transition as Root transition作为根节点">21. Transition as Root transition作为根节点</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_22-transition-group-root-element-transition-group作为一个根节点" title="22. Transition Group Root Element transition-group作为一个根节点">22. Transition Group Root Element transition-group作为一个根节点</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_23-vnode-lifecycle-events-节点生命周期事件" title="23. VNode lifecycle events 节点生命周期事件">23. VNode lifecycle events 节点生命周期事件</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_24-watch-on-arrays-监听数组" title="24. Watch on Arrays 监听数组">24. Watch on Arrays 监听数组</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#新框架的建议" title="新框架的建议">新框架的建议</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1-build-toolchain-构建工具链" title="1. Build Toolchain 构建工具链">1. Build Toolchain 构建工具链</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-vue-router-vue路由" title="2. Vue Router Vue路由">2. Vue Router Vue路由</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3-state-management-状态管理" title="3. State Management 状态管理">3. State Management 状态管理</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_4-ide-support-编辑器支持" title="4. IDE Support 编辑器支持">4. IDE Support 编辑器支持</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_5-devtools-extension-开发工具扩展" title="5. Devtools Extension 开发工具扩展">5. Devtools Extension 开发工具扩展</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-typescript-support-ts支持" title="6. TypeScript Support ts支持">6. TypeScript Support ts支持</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-static-site-generator-静态站点生成" title="7. Static Site Generator 静态站点生成">7. Static Site Generator 静态站点生成</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-jsx" title="8. JSX">8. JSX</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#迁移构建" title="迁移构建">迁移构建</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#已知的局限性" title="已知的局限性">已知的局限性</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#installation" title="Installation">Installation</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#兼容配置" title="兼容配置">兼容配置</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#兼容表" title="兼容表">兼容表</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#不稳定的" title="不稳定的">不稳定的</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#部分兼容" title="部分兼容">部分兼容</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#兼容无警告" title="兼容无警告">兼容无警告</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#稳定兼容" title="稳定兼容">稳定兼容</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/FiggerDancer" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8>Privacy Policy</a></li><li class="copyright-item" data-v-3d9deeb8>Fanny Li © 2019</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/FannyBlog/assets/js/app.a39f2cab.js" defer></script><script src="/FannyBlog/assets/js/12.2adad98b.js" defer></script><script src="/FannyBlog/assets/js/4.afb47655.js" defer></script><script src="/FannyBlog/assets/js/44.c5cca5de.js" defer></script>
  </body>
</html>
